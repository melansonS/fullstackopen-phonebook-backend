{"version":3,"sources":["services/people.js","components/Filter.js","components/PersonForm.js","components/Person.js","components/Persons.js","components/AlertBox.js","App.js","index.js"],"names":["baseUrl","exports","getAll","axios","get","then","response","data","createPerson","newPerson","post","updatePerson","id","put","deletePerson","delete","Filter","searchValue","setSearchValue","type","value","onChange","e","target","PersonForm","addPerson","setNewName","newName","setNewNumber","newNumber","onSubmit","required","Person","person","handleDelete","name","number","onClick","Persons","peopleToShow","map","AlertBox","message","error","className","App","useState","persons","setPersons","alertMessage","setAlertMessage","isError","setIsError","useEffect","peopleService","filter","toLocaleLowerCase","includes","preventDefault","personInPhonebook","find","window","confirm","setTimeout","catch","err","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ab1ac4d2.chunk.js","sourcesContent":["import axios from \"axios\";\n// const baseUrl = \"https://whispering-lake-51690.herokuapp.com/api/persons\";\n// const baseUrl = \"http://localhost:3001/api/persons\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst createPerson = (newPerson) => {\n  const request = axios.post(baseUrl, newPerson);\n  return request.then((response) => response.data);\n};\n\nconst updatePerson = (id, newPerson) => {\n  const request = axios.put(`${baseUrl}/${id}`, newPerson);\n  return request.then((response) => response.data);\n};\n\nconst deletePerson = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response.data);\n};\n\nconst exports = { getAll, createPerson, updatePerson, deletePerson };\n\nexport default exports;\n","import React from \"react\";\n\nconst Filter = ({ searchValue, setSearchValue }) => {\n  return (\n    <div>\n      filter shown with\n      <input\n        type=\"text\"\n        value={searchValue}\n        onChange={(e) => setSearchValue(e.target.value)}\n      ></input>\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\n\nconst PersonForm = ({\n  addPerson,\n  setNewName,\n  newName,\n  setNewNumber,\n  newNumber,\n}) => {\n  return (\n    <form onSubmit={addPerson}>\n      <div>\n        name:{\" \"}\n        <input\n          required\n          onChange={(e) => setNewName(e.target.value)}\n          value={newName}\n        />\n      </div>\n      <div>\n        number:{\" \"}\n        <input\n          required\n          onChange={(e) => setNewNumber(e.target.value)}\n          value={newNumber}\n        />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Person = ({ person, handleDelete }) => (\n  <p>\n    {person.name} {person.number}{\" \"}\n    <button onClick={() => handleDelete(person.id, person.name)}>delete</button>\n  </p>\n);\n\nexport default Person;\n","import React from \"react\";\nimport Person from \"./Person\";\n\nconst Persons = ({ peopleToShow, handleDelete }) => {\n  return (\n    <>\n      {peopleToShow.map((person) => (\n        <Person person={person} key={person.id} handleDelete={handleDelete} />\n      ))}\n    </>\n  );\n};\n\nexport default Persons;\n","import React from \"react\";\n\nconst AlertBox = ({ message, error }) => {\n  if (message === null) return null;\n  return <div className={`alert-box ${error ? \"error\" : \"\"}`}>{message}</div>;\n};\n\nexport default AlertBox;\n","import React, { useState, useEffect } from \"react\";\nimport peopleService from \"./services/people\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport AlertBox from \"./components/AlertBox\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [searchValue, setSearchValue] = useState(\"\");\n  const [alertMessage, setAlertMessage] = useState(null);\n  const [isError, setIsError] = useState(false);\n\n  useEffect(() => {\n    peopleService.getAll().then((persons) => setPersons(persons));\n  }, []);\n\n  const addPerson = (e) => {\n    e.preventDefault();\n    const personInPhonebook = persons.find((person) => person.name === newName);\n\n    if (personInPhonebook) {\n      const confimration = window.confirm(\n        `${newName} is already added to phonebook, replace the old number with a new one?`\n      );\n      if (confimration) {\n        peopleService\n          .updatePerson(personInPhonebook.id, {\n            ...personInPhonebook,\n            number: newNumber,\n          })\n          .then((newPerson) => {\n            setIsError(false);\n            setAlertMessage(`${newPerson.name}'s number has been updated!`);\n            setPersons(\n              persons.map((person) =>\n                person.id !== newPerson.id ? person : newPerson\n              )\n            );\n            setTimeout(() => setAlertMessage(null), 4000);\n          })\n          .catch((err) => {\n            setIsError(true);\n            setAlertMessage(\n              `Information on ${personInPhonebook.name} has been removed from the server`\n            );\n            setTimeout(() => {\n              setIsError(false);\n              setAlertMessage(null);\n            }, 4000);\n          });\n      }\n    } else {\n      const newPerson = { name: newName, number: newNumber };\n      peopleService.createPerson(newPerson).then((person) => {\n        setIsError(false);\n        setAlertMessage(`${person.name} was added!`);\n        setPersons(persons.concat(person));\n        setTimeout(() => setAlertMessage(null), 4000);\n      });\n    }\n\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n\n  const handleDelete = (id, name) => {\n    const confirmation = window.confirm(`Delete ${name} ?`);\n    if (confirmation) {\n      peopleService\n        .deletePerson(id)\n        .then(() => {\n          setIsError(false);\n          setAlertMessage(`${name} has been deleted!`);\n          setTimeout(() => setAlertMessage(null), 4000);\n        })\n        .catch((err) => {\n          setIsError(true);\n          setAlertMessage(\n            `Information on ${name} has already been removed from the server`\n          );\n          setTimeout(() => {\n            setIsError(false);\n            setAlertMessage(null);\n          }, 4000);\n        });\n\n      setPersons(persons.filter((person) => person.id !== id));\n    }\n  };\n\n  const peopleToShow =\n    searchValue === \"\"\n      ? persons\n      : persons.filter((person) =>\n          person.name\n            .toLocaleLowerCase()\n            .includes(searchValue.toLocaleLowerCase())\n        );\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Filter searchValue={searchValue} setSearchValue={setSearchValue} />\n      <h3>Add a new</h3>\n      <AlertBox message={alertMessage} error={isError} />\n      <PersonForm\n        addPerson={addPerson}\n        setNewName={setNewName}\n        newName={newName}\n        setNewNumber={setNewNumber}\n        newNumber={newNumber}\n      />\n      <h2>Numbers</h2>\n      <Persons peopleToShow={peopleToShow} handleDelete={handleDelete} />\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}